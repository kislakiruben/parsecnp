!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.ParseCNP=n()}(this,function(){"use strict";function e(e){return this instanceof B?this:new B(e)}var n=function(e,n){var t="279146358279",a=e.split("").reduce(function(e,n,a){return e+n*t.charAt(a)},0),r=a%11,i=0===r?1:r;return parseInt(n,10)===i},t={"01":{ISO:"AB",name:"Alba"},"02":{ISO:"AR",name:"Arad"},"03":{ISO:"AG",name:"Argeș"},"04":{ISO:"BC",name:"Bacău"},"05":{ISO:"BH",name:"Bihor"},"06":{ISO:"BN",name:"Bistrița-Năsăud"},"07":{ISO:"BT",name:"Botoșani"},"08":{ISO:"BV",name:"Brașov"},"09":{ISO:"BR",name:"Brăila"},10:{ISO:"BZ",name:"Buzău"},11:{ISO:"CS",name:"Caraș-Severin"},12:{ISO:"CJ",name:"Cluj"},13:{ISO:"CT",name:"Constanța"},14:{ISO:"CV",name:"Covasna"},15:{ISO:"DB",name:"Dâmbovița"},16:{ISO:"DJ",name:"Dolj"},17:{ISO:"GL",name:"Galați"},18:{ISO:"GJ",name:"Gorj"},19:{ISO:"HR",name:"Harghita"},20:{ISO:"HD",name:"Hunedoara"},21:{ISO:"IL",name:"Ialomița"},22:{ISO:"IS",name:"Iași"},23:{ISO:"IF",name:"Ilfov"},24:{ISO:"MM",name:"Maramureș"},25:{ISO:"MH",name:"Mehedinți"},26:{ISO:"MS",name:"Mureș"},27:{ISO:"NT",name:"Neamț"},28:{ISO:"OT",name:"Olt"},29:{ISO:"PH",name:"Prahova"},30:{ISO:"SM",name:"Satu Mare"},31:{ISO:"SJ",name:"Sălaj"},32:{ISO:"SB",name:"Sibiu"},33:{ISO:"SV",name:"Suceava"},34:{ISO:"TR",name:"Teleorman"},35:{ISO:"TM",name:"Timiș"},36:{ISO:"TL",name:"Tulcea"},37:{ISO:"VS",name:"Vaslui"},38:{ISO:"VL",name:"Vâlcea"},39:{ISO:"VN",name:"Vrancea"},40:{ISO:"B",name:"București"},41:{ISO:"B",name:"București Sector 1"},42:{ISO:"B",name:"București Sector 2"},43:{ISO:"B",name:"București Sector 3"},44:{ISO:"B",name:"București Sector 4"},45:{ISO:"B",name:"București Sector 5"},46:{ISO:"B",name:"București Sector 6"},51:{ISO:"CL",name:"Călărași"},52:{ISO:"GR",name:"Giurgiu"}},a=function(e,n){return e.includes(n)},r=function(e){return Object.keys(e)},i=function(e,n,t){var a=new Date(e,n-1,t),r=parseInt(e,10)===a.getFullYear(),i=parseInt(n,10)===a.getMonth()+1,u=parseInt(t,10)===a.getDate();return r&&i&&u},u=function(e){var n={code:e,name:t[e].name,ISO:t[e].ISO};return n},c=function(e){return a(r(t),e)},o=function(e,n){var t={1:"19",2:"19",3:"18",4:"18",5:"20",6:"20"},a=n.substr(2,2),r=n.substr(4,2),u=""+t[e]+n.substr(0,2),c=new Date(u,a-1,r);return i(u,a,r)?c:new Date("")},s=function(e){return!isNaN(e)},S=function(e){return e>0},m={0:"not kwown",1:"male",2:"female",9:"not applicable"},I={1:m[1],2:m[2],3:m[1],4:m[2],5:m[1],6:m[2],7:m[1],8:m[2],9:m[9]},O=function(e){return I[e]||m[0]},h=function(e){return a(r(I),e)},f=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},l=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),B=function(){function e(n){f(this,e),this.raw={cnp:n,sex:n.charAt(0),birthdate:n.substr(1,6),county:n.substr(7,2),serial:n.substr(9,3),checksum:n.charAt(12)}}return l(e,[{key:"toString",value:function(){return this.raw.toString()}},{key:"toJSON",value:function(){return JSON.stringify({birthdate:this.birthdate,checksum:this.checksum,county:this.county,serial:this.serial,sex:this.sex})}},{key:"sex",get:function(){return O(this.raw.sex)}},{key:"birthdate",get:function(){return o(this.raw.sex,this.raw.birthdate)}},{key:"day",get:function(){return this.birthdate.getDate()}},{key:"month",get:function(){return this.birthdate.getMonth()+1}},{key:"year",get:function(){return this.birthdate.getFullYear()}},{key:"county",get:function(){return u(this.raw.county)}},{key:"serial",get:function(){return this.raw.serial}},{key:"checksum",get:function(){return this.raw.checksum}},{key:"isValid",get:function(){var e=h(this.raw.sex),t=c(this.raw.county),a=S(this.raw.serial),r=n(this.raw.cnp,this.raw.checksum),i=s(this.birthdate);return e&&i&&t&&a&&r}}]),e}();return e});
